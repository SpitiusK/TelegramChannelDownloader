<Window x:Class="TelegramChannelDownloader.Desktop.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:views="clr-namespace:TelegramChannelDownloader.Desktop.Views"
        xmlns:converters="clr-namespace:TelegramChannelDownloader.Desktop.Converters"
        mc:Ignorable="d"
        Title="Telegram Channel Downloader" 
        Height="800" Width="1200" 
        MinHeight="600" MinWidth="800"
        WindowStartupLocation="CenterScreen">
    
    <Window.Resources>
        <converters:BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />
        <converters:ConnectedToColorConverter x:Key="ConnectedToColorConverter" />
        <converters:AuthStatusConverter x:Key="AuthStatusConverter" />
        
        <!-- Tab Header Style -->
        <Style TargetType="TabItem">
            <Setter Property="FontWeight" Value="Bold" />
            <Setter Property="FontSize" Value="14" />
            <Setter Property="Padding" Value="20,10" />
            <Setter Property="Margin" Value="2,0" />
            <Style.Triggers>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="#3498DB" />
                    <Setter Property="Foreground" Value="White" />
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="0.4*" />
        </Grid.RowDefinitions>
        
        <!-- Application Header -->
        <Border Grid.Row="0" Background="#2C3E50" Padding="20,15">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                
                <!-- Application Title -->
                <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">
                    <TextBlock Text="ðŸ“±" FontSize="24" VerticalAlignment="Center" Margin="0,0,10,0" />
                    <TextBlock Text="Telegram Channel Downloader" 
                               FontSize="24" 
                               FontWeight="Bold" 
                               Foreground="White"
                               VerticalAlignment="Center" />
                </StackPanel>
                
                <!-- Status Indicators -->
                <StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Center">
                    
                    <!-- Authentication Status -->
                    <StackPanel Orientation="Horizontal">
                        <Ellipse Width="12" Height="12" VerticalAlignment="Center" Margin="0,0,5,0">
                            <Ellipse.Fill>
                                <SolidColorBrush Color="{Binding IsAuthenticated, Converter={StaticResource ConnectedToColorConverter}}" />
                            </Ellipse.Fill>
                        </Ellipse>
                        <TextBlock Text="{Binding IsAuthenticated, Converter={StaticResource AuthStatusConverter}}" 
                                   Foreground="White" 
                                   FontWeight="Medium"
                                   VerticalAlignment="Center" />
                    </StackPanel>
                    
                    <!-- Download Status -->
                    <StackPanel Orientation="Horizontal" 
                                Margin="20,0,0,0"
                                Visibility="{Binding Download.IsDownloading, Converter={StaticResource BooleanToVisibilityConverter}}">
                        <TextBlock Text="â¬‡ï¸" FontSize="14" VerticalAlignment="Center" Margin="0,0,5,0" />
                        <TextBlock Text="Downloading..." 
                                   Foreground="#F39C12" 
                                   FontWeight="Bold"
                                   VerticalAlignment="Center" />
                    </StackPanel>
                    
                </StackPanel>
            </Grid>
        </Border>
        
        <!-- Main Content Area -->
        <TabControl Grid.Row="1" 
                    SelectedIndex="{Binding SelectedTabIndex}"
                    Background="#F8F9FA"
                    BorderThickness="0">
            
            <!-- Authentication Tab -->
            <TabItem Header="ðŸ” Authentication">
                <views:AuthenticationView DataContext="{Binding Authentication}" />
            </TabItem>
            
            <!-- Download Tab -->
            <TabItem Header="â¬‡ï¸ Download" IsEnabled="{Binding IsAuthenticated}">
                <views:DownloadView DataContext="{Binding Download}" />
            </TabItem>
            
            <!-- Settings Tab -->
            <TabItem Header="âš™ï¸ Settings">
                <views:SettingsView DataContext="{Binding Settings}" />
            </TabItem>
            
        </TabControl>
        
        <!-- Log Section -->
        <GridSplitter Grid.Row="1" 
                      Height="5" 
                      HorizontalAlignment="Stretch" 
                      VerticalAlignment="Bottom"
                      Background="#BDC3C7" />
        
        <views:LogView Grid.Row="2" DataContext="{Binding}" />
        
    </Grid>
</Window>
